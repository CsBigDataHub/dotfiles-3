#!/bin/zsh

# clippaste - "Paste" data from clipboard to stdout
#
# Usage:
#
#   clippaste   - writes clipboard's contents to stdout
#
#   clippaste | <command>    - pastes contents and pipes it to another process
#
#   clippaste > <file>      - paste contents to a file
#
# Examples:
#
#   # Pipe to another process
#   clippaste | grep foo
#
#   # Paste to a file
#   clippaste > file.txt
function clipboard-paste() {
  emulate -L zsh
  if is-darwin; then
    pbpaste
  elif is-cygwin; then
    cat /dev/clipboard
  else
    if command-exists xclip; then
      xclip -out -selection clipboard
    elif command-exists xsel; then
      xsel --clipboard --output
    else
      message="clipboard-paste: Platform $GRML_OSTYPE not supported "
      message+="or xclip/xsel not installed"
      print $message >&2
      return 1
    fi
  fi
}

clipboard-paste $@
